(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/lixeira.111452ff.png"},function(e,t,a){e.exports=a.p+"static/media/starwars-fight.7e737fa8.gif"},function(e,t,a){e.exports=a.p+"static/media/starwars-run-robo.fe9fa9f1.gif"},function(e,t,a){e.exports=a.p+"static/media/starwars-logo.a89ec600.gif"},,function(e,t,a){e.exports=a.p+"static/media/wave-haikei(4).6ba45665.svg"},function(e,t,a){e.exports=a(27)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),l=a.n(c),o=(a(19),Object(n.createContext)()),i=a(5),u=a(1),s=function(e){var t=e.split("_");return t.forEach((function(e,a){t[a]="".concat(e[0].toUpperCase()).concat(e.slice(1))})),t.join(" ")},m=(a(20),a(8)),f=a.n(m),d=["population","orbital_period","diameter","rotation_period","surface_water"],p=["maior que","menor que","igual a"];var b=function(){var e=Object(n.useContext)(o),t=e.filterByNumericValues,a=e.setFilterByNumericValues,c=Object(n.useState)(d),l=Object(u.a)(c,2),m=l[0],b=l[1],E=Object(n.useState)("population"),v=Object(u.a)(E,2),h=v[0],O=v[1],j=Object(n.useState)("maior que"),g=Object(u.a)(j,2),y=g[0],N=g[1],C=Object(n.useState)(""),w=Object(u.a)(C,2),k=w[0],S=w[1],x=function(e,t){var a=e.target.value;if(parseInt(a,10)){var n=parseInt(a,10);t(n>0?n:-1*n)}else t(a)},F=function(e){var t=Object(u.a)(e,5),a=t[0],n=t[1],c=t[2],l=t[3],o=t[4],i=a.split(":")[0].toLowerCase();return r.a.createElement("label",{htmlFor:"".concat(i,"-comparison"),className:"".concat(i,"-comparison")},r.a.createElement("span",null,a),r.a.createElement("select",{"data-testid":c,id:"".concat(i,"-comparison"),value:l,onChange:function(e){return x(e,o)}},n.map((function(e){return r.a.createElement("option",{key:e,value:e},s(e))}))))};return r.a.createElement("section",{className:"comparison-filter-section"},r.a.createElement("div",{className:"comparison-filter-fields"},m.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,F(["Coluna: ",m,"column-filter",h,O])),r.a.createElement("div",null,F(["Operador: ",p,"comparison-filter",y,N])),r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"value-filter",type:"number",className:"value-input",value:k,placeholder:"Valor",onChange:function(e){return x(e,S)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-testid":"button-filter",className:"filter-btn",onClick:function(){var e=parseInt(k,10);console.log(e),a((function(t){return[].concat(Object(i.a)(t),[{column:h,comparison:y,value:e}])}));var t=m.filter((function(e){return e!==h}));b(t),O(t[0]),N("maior que"),S("")},disabled:0===m.length||!k},"Filtrar"))),r.a.createElement("div",null,r.a.createElement("button",{type:"button","data-testid":"button-remove-filters",className:"remove-all-filters-btn",onClick:function(){a([]),b(d),O(d[0]),S("")},disabled:0===t.length},"Remover todas filtragens"))),r.a.createElement("div",{className:"comparison-filters-div"},t.map((function(e){var n=e.column,c=e.comparison,l=e.value;return r.a.createElement("div",{key:n,"data-testid":"filter",className:"comparison-filter"},r.a.createElement("p",null,s("".concat(n," ").concat(c," ").concat(l))),r.a.createElement("img",{src:f.a,alt:"lixeira",onClick:function(){return function(e){var n=t.filter((function(t){return t.column!==e}));a(n);var r=d.filter((function(t){return[].concat(Object(i.a)(m),[e]).includes(t)}));b(r),O(r[0])}(n)},"aria-hidden":"true"}))}))))},E=(a(21),a(9)),v=a.n(E),h=a(10),O=a.n(h);var j=function(){return r.a.createElement("header",null,r.a.createElement("img",{className:"starwars-fight",src:v.a,alt:"luta starwars"}),r.a.createElement("div",null,r.a.createElement("h1",{className:"star-wars"},"Star Wars"),r.a.createElement("h1",{className:"planets-search"},"Planets Search")),r.a.createElement("img",{className:"starwars-run-robo",src:O.a,alt:"robo starwars"}))},g=(a(22),["population","orbital_period","diameter","rotation_period","surface_water"]);var y=function(){var e=Object(n.useContext)(o).setOrder,t=Object(n.useState)(g[0]),a=Object(u.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),m=Object(u.a)(i,2),f=m[0],d=m[1],p=function(e,t){t(e.target.value)};return r.a.createElement("section",{className:"order-filter-section"},r.a.createElement("label",{htmlFor:"orderBy",className:"order-by-label"},r.a.createElement("span",null,"Ordenar por:"),r.a.createElement("select",{"data-testid":"column-sort",id:"orderBy",value:c,onChange:function(e){return p(e,l)}},g.map((function(e){return r.a.createElement("option",{key:e,value:e},s(e))})))),r.a.createElement("div",{className:"asc-desc-div"},r.a.createElement("label",{htmlFor:"ASC"},r.a.createElement("input",{"data-testid":"column-sort-input-asc",type:"radio",name:"order",id:"ASC",value:"ASC",onChange:function(e){return p(e,d)}}),r.a.createElement("span",null,"Ascendente")),r.a.createElement("label",{htmlFor:"DESC"},r.a.createElement("input",{"data-testid":"column-sort-input-desc",type:"radio",name:"order",id:"DESC",value:"DESC",onChange:function(e){return p(e,d)}}),r.a.createElement("span",null,"Descendente"))),r.a.createElement("button",{"data-testid":"column-sort-button",type:"button",onClick:function(){e({column:c,sort:f})},disabled:!f},"Ordenar"))};a(23);var N=function(){var e=Object(n.useContext)(o),t=e.filterByName,a=e.setFilterByName;return r.a.createElement("section",{className:"name-filter-section"},r.a.createElement("input",{"data-testid":"name-filter",type:"text",value:t,placeholder:"Search for a planet!",onChange:function(e){var t=e.target.value;a(t)}}))};a(24);var C=function(){var e=Object(n.useContext)(o),t=e.data,a=e.filteredData,c=Object.keys(t[0]);return r.a.createElement("section",{className:"table-section"},r.a.createElement("h2",null,"Planets Information"),r.a.createElement(N,null),a.length>0?r.a.createElement("div",{className:"table-div"},r.a.createElement("table",{border:"1",className:"table"},function(e){return r.a.createElement("thead",null,r.a.createElement("tr",null,e.map((function(e){return r.a.createElement("th",{key:e},s(e))}))))}(c),function(e){return r.a.createElement("tbody",null,a.map((function(t,a){return r.a.createElement("tr",{key:t.name},e.map((function(e,n){return function(e,t,a,n){var c=e[t];return Array.isArray(c)?r.a.createElement("td",{key:"".concat(t,"-").concat(a)},c.map((function(e,n){return r.a.createElement("p",{key:"".concat(t,"-").concat(a,"-").concat(n)},e)}))):r.a.createElement("td",{key:"".concat(t,"-").concat(a),"data-testid":0===n&&"planet-name"},c)}(t,e,a,n)})))})))}(c))):r.a.createElement("h3",null,"Information not found"))},w=(a(25),a(11)),k=a.n(w);var S=function(){var e=Object(n.useContext)(o),t=e.isFetching;return e.error?r.a.createElement("h1",{className:"error-message",style:{color:"white"}},"Ops, algo deu errado. Recarregue sua p\xe1gina!"):t?r.a.createElement("img",{className:"logo",src:k.a,alt:"logo starwars"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement("main",null,r.a.createElement("section",{className:"all-filters-section"},r.a.createElement("h2",null,"Filters"),r.a.createElement(y,null),r.a.createElement(b,null)),r.a.createElement(C,null)))},x=a(4),F=a.n(x),I=a(12),B=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(u.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(!0),m=Object(u.a)(s,2),f=m[0],d=m[1],p=Object(n.useState)(!1),b=Object(u.a)(p,2),E=b[0],v=b[1],h=Object(n.useState)(""),O=Object(u.a)(h,2),j=O[0],g=O[1],y=Object(n.useState)([]),N=Object(u.a)(y,2),C=N[0],w=N[1],k=Object(n.useState)([]),S=Object(u.a)(k,2),x=S[0],B=S[1],A=Object(n.useState)({column:void 0,sort:void 0}),_=Object(u.a)(A,2),q=_[0],D=_[1],V=function(e,t,a,n){var r=e,c=t;if(a){if("unknown"===e)return n?1:-1;if("unknown"===t)return n?-1:1;r=parseInt(e,10),c=parseInt(t,10)}return r>c?1:r<c?-1:0},L=function(e){for(var t=e.map((function(e){return e})),a=function(e){t=t.filter((function(t){return function(e,t){var a=x[t],n=a.column,r=a.comparison,c=a.value;return"maior que"===r?parseInt(e[n],10)>parseInt(c,10):"menor que"===r?parseInt(e[n],10)<parseInt(c,10):parseInt(e[n],10)===parseInt(c,10)}(t,e)}))},n=0;n<x.length;n+=1)a(n);return t};Object(n.useEffect)((function(){(function(){var e=Object(I.a)(F.a.mark((function e(){var t,a,n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()})).catch((function(){return"error"}));case 3:"error"!==(t=e.sent)?(a=t.results,(n=a.map((function(e){return delete e.residents,e}))).sort((function(e,t){return V(e.name,t.name)})),i(n)):v(!0),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.useEffect)((function(){w(function(){var e=l.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return e=L(e)}())}),[l,j,x]),Object(n.useEffect)((function(){q.column&&function(){var e=l.map((function(e){return e})),t=q.column;"ASC"===q.sort?e.sort((function(e,a){return V(e[t],a[t],!0,!0)})):e.sort((function(e,a){return V(a[t],e[t],!0)})),i(e)}()}),[q]);var P={data:l,isFetching:f,error:E,filteredData:C,filterByName:j,filterByNumericValues:x,order:q,setFilterByName:g,setFilterByNumericValues:B,setOrder:D};return r.a.createElement(o.Provider,{value:P},t)},A=a(13),_=a.n(A);var q=function(){return r.a.createElement(B,null,r.a.createElement("div",{className:"background"},r.a.createElement("img",{src:_.a,alt:"scatter-haikei"})),r.a.createElement("div",{className:"content"},r.a.createElement(S,null)))};l.a.render(r.a.createElement(q,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.d8860561.chunk.js.map